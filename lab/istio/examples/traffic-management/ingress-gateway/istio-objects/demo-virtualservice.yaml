---
apiVersion: networking.istio.io/v1alpha3
kind: VirtualService
metadata:
  name: public-ingress-routes
  namespace: demo
spec:
  hosts:
  - demo.example.com
  - httpbin.example.com
  gateways:
  - istio-system/public-ingress-gateway
  http:
    - name: httpbin
      headers:
        request:
          add:
            X-A1-origin: public-ingress-routes
      route:
      - destination:
          host: httpbin.demo.svc.cluster.local
          port:
            number: 8000
---
apiVersion: networking.istio.io/v1alpha3
kind: VirtualService
metadata:
  name: mesh-ingress-routes
  namespace: demo
spec:
  hosts:
  - httpbin.demo
  - httpbin.demo.svc
  - httpbin.demo.svc.cluster.local
  gateways:
  - mesh
  http:
    - name: httpbin
      headers:
        request:
          add:
            X-A1-origin: mesh-ingress-routes
      route:
      - destination:
          host: httpbin.demo.svc.cluster.local
          port:
            number: 8000
